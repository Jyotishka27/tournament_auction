<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Football Auctioneer</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
<style>
  body {
    font-family: Inter, system-ui;
  }
  .countdown.blink {
    animation: blink 1s steps(2, start) infinite;
  }
  @keyframes blink {
    to { visibility: hidden; }
  }
</style>
</head>

<body class="bg-slate-50 text-slate-900">

<header class="sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex justify-between items-center">
  <div class="text-xl font-bold">⚽ Independence Cup 2025 Auction</div>
</header>

<main class="max-w-6xl mx-auto p-6 space-y-6">

  <!-- PLAYER CARD -->
  <div id="currentPlayerCard"
       class="bg-white rounded-2xl border border-slate-200 p-6 grid md:grid-cols-3 gap-6"
       hidden>

    <!-- IMAGE -->
    <div>
      <img id="playerImg"
           class="w-full h-64 object-cover rounded-xl border border-slate-200 bg-slate-100" />
    </div>

    <!-- PLAYER INFO + AUCTION -->
    <div class="md:col-span-2 space-y-6">

      <!-- INFO -->
      <div class="flex justify-between">
        <div>
          <h2 id="playerName" class="text-2xl font-bold"></h2>
          <p class="text-slate-600">Category: <span id="playerCat"></span></p>
          <p class="text-slate-600">Position: <span id="playerPosition"></span></p>
        </div>
        <div class="text-right">
          <div class="text-xs text-slate-500 uppercase">Base Price</div>
          <div id="playerBase" class="text-lg font-semibold"></div>
        </div>
      </div>

      <!-- AUCTION CONTROL PANEL -->
      <div class="space-y-6">

        <!-- STATUS ROW -->
        <div class="grid md:grid-cols-3 gap-4">

          <!-- CURRENT BID -->
          <div class="bg-slate-100 rounded-2xl p-5 text-center">
            <div class="text-xs uppercase text-slate-500 tracking-wide">
              Current Bid
            </div>
            <div id="currentBidDisplay"
                 class="text-3xl font-bold mt-2">
              ₹ 0
            </div>
          </div>

          <!-- INCREMENT -->
          <div class="bg-white border border-slate-200 rounded-2xl p-5">
            <div class="text-xs uppercase text-slate-500 tracking-wide">
              Bid Increment
            </div>
            <input id="bidStep"
                   type="number"
                   class="w-full mt-3 rounded-xl border-slate-300 text-center font-semibold text-lg"
                   value="50000" />
          </div>

          <!-- TIMER -->
          <div class="bg-white border border-slate-200 rounded-2xl p-5 text-center">
            <div class="text-xs uppercase text-slate-500 tracking-wide">
              Timer
            </div>
            <div id="countdown"
                 class="text-3xl font-bold mt-2">
              —
            </div>
            <button id="btnCancelTimer"
                    class="mt-3 text-xs text-slate-500 underline">
              Cancel
            </button>
          </div>

        </div>

        <!-- BIDDING PANEL -->
        <div>
          <h3 class="text-sm font-semibold uppercase tracking-wide text-slate-600 mb-4">
            Place Bid
          </h3>
          <div id="bidTeamsContainer"
               class="grid grid-cols-2 md:grid-cols-3 gap-4">
          </div>
        </div>

      </div>

    </div>
  </div>

</main>

<script>
(() => {

  const TEAMS = [
    { name: "Ayon Roy", budget: 4000000 },
    { name: "Subhojit Dutta", budget: 4000000 },
    { name: "Ritam Chowdhury", budget: 4000000 },
    { name: "Shubhanjan Basu", budget: 4000000 },
    { name: "Srinjoy Kundu", budget: 4000000 },
    { name: "Subhamoy Das", budget: 4000000 },
  ];

  const PLAYERS = [
    { id: "gk1", name: "Rupayan Chakraborty", basePrice: 400000, category: "BP: 4", position: "Goalkeeper" }
  ];

  const state = {
    current: null,
    teams: TEAMS.map(t => ({...t})),
    timer: { handle: null, left: 0, running: false }
  };

  const dom = {
    card: document.getElementById("currentPlayerCard"),
    playerName: document.getElementById("playerName"),
    playerCat: document.getElementById("playerCat"),
    playerPosition: document.getElementById("playerPosition"),
    playerBase: document.getElementById("playerBase"),
    bidTeamsContainer: document.getElementById("bidTeamsContainer"),
    currentBidDisplay: document.getElementById("currentBidDisplay"),
    bidStepInput: document.getElementById("bidStep"),
    countdown: document.getElementById("countdown"),
    btnCancelTimer: document.getElementById("btnCancelTimer")
  };

  function fmt(n){ return new Intl.NumberFormat("en-IN").format(n); }

  function loadPlayer(){
    const p = PLAYERS[0];
    state.current = { player: p, bid: p.basePrice, bidder: null };
    dom.card.hidden = false;

    dom.playerName.textContent = p.name;
    dom.playerCat.textContent = p.category;
    dom.playerPosition.textContent = p.position;
    dom.playerBase.textContent = "₹ " + fmt(p.basePrice);

    render();
  }

  function render(){
    dom.currentBidDisplay.textContent = "₹ " + fmt(state.current.bid);
    renderButtons();
  }

  function renderButtons(){
    dom.bidTeamsContainer.innerHTML = "";

    state.teams.forEach((team, i)=>{
      const btn = document.createElement("button");
      btn.className = `
        h-16 rounded-2xl text-white font-semibold text-base
        shadow-md transition-all duration-200
        flex items-center justify-center
        bg-indigo-600 hover:bg-indigo-700
      `;

      if(state.current.bidder === i){
        btn.classList.remove("bg-indigo-600");
        btn.classList.add("bg-emerald-600");
      }

      btn.textContent = team.name;
      btn.onclick = ()=>placeBid(i);
      dom.bidTeamsContainer.appendChild(btn);
    });
  }

  function placeBid(i){
    const step = Number(dom.bidStepInput.value);
    const next = state.current.bidder === null ? state.current.bid : state.current.bid + step;

    if(next > state.teams[i].budget) return;

    state.current.bid = next;
    state.current.bidder = i;
    startTimer();
    render();
  }

  function startTimer(){
    state.timer.left = 45;
    if(!state.timer.running){
      state.timer.running = true;
      state.timer.handle = setInterval(()=>{
        state.timer.left--;
        dom.countdown.textContent = state.timer.left + "s";
        if(state.timer.left <= 0){
          clearInterval(state.timer.handle);
          state.timer.running = false;
        }
      },1000);
    }
  }

  dom.btnCancelTimer.onclick = ()=>{
    clearInterval(state.timer.handle);
    state.timer.running = false;
    dom.countdown.textContent = "—";
  };

  loadPlayer();

})();
</script>

</body>
</html>
